WITH
  confirmed_by_states AS (
  SELECT
    subregion1_name AS state,
    SUM(cumulative_confirmed) AS total_confirmed_cases
  FROM
    `bigquery-public-data.covid19_open_data.covid19_open_data`
  WHERE
    country_name="United States of America"
    AND date='2020-04-20'
    AND subregion1_name IS NOT NULL
  GROUP BY
    subregion1_name )
SELECT
  *
FROM
  confirmed_by_states
WHERE
  total_confirmed_cases > 2500;
